// Module included in the following assemblies:
//
// * scalability_and_performance/ztp-factory-install-clusters.adoc
:_content-type: PROCEDURE
[id="post-hub-factory-pipeline-verification-checks_{context}"]
= Post hub factory pipeline verification checks
include::modules/common-attributes.adoc[]

Perform the following steps after completion of the hub factory pipeline run.

.Prerequisites

* An {product-title} hub cluster.
* Log in as a user with `cluster-admin` privileges.

.Procedure

. Verify RHACM is successfully installed (when using ACM):
+
[source,terminal]
----
$ oc get pod -n open-cluster-management
----
+
.Example output
[source,terminal]
----
NAME                                                        READY   STATUS      RESTART         AGE
application-chart-ee7d2-applicastionui-7d99756554-jrs24     1/1     RUNNING     0               6m31s
application-chart-ee7d2-applicastionui-7d99756554-jrs24     1/1     RUNNING     0               6m31s
application-chart-ee7d2-applicastionui-7d99756554-jrs24     1/1     RUNNING     0               6m31s
application-chart-ee7d2-applicastionui-7d99756554-jrs24     1/1     RUNNING     0               6m31s
assisted-image-service-67489b657b-68qtg                     1/1     RUNNING     0               2m30s
assisted-service-5b8874ffd9-rjrg                            2/2     RUNNING     1 (2m19s ago)   2m30s
----

. Verify MCE is successfully installed (when using MCE):
+
[source,terminal]
----
$ oc get pod -n multicluster-engine
----
+
.Example output
[source,terminal]
----

NAME                                                   READY   STATUS    RESTARTS        AGE
agentinstalladmission-787b6fc98d-9mk4n                 1/1     Running   0               4m46s
agentinstalladmission-787b6fc98d-fn5k7                 1/1     Running   0               4m46s
assisted-image-service-0                               1/1     Running   0               4m46s
assisted-service-7857f984d6-mtzf8                      2/2     Running   0               4m46s
cluster-curator-controller-864c5fcd47-8fvks            1/1     Running   0               7m43s
cluster-curator-controller-864c5fcd47-kw69f            1/1     Running   1 (6m46s ago)   7m43s
cluster-manager-7b5df6b8cb-brhlc                       1/1     Running   0               7m42s
cluster-manager-7b5df6b8cb-g8xn5                       1/1     Running   0               7m42s
cluster-manager-7b5df6b8cb-khz6g                       1/1     Running   0               7m42s
clusterclaims-controller-5f8c678f9f-7xk24              2/2     Running   0               7m43s
clusterclaims-controller-5f8c678f9f-s6lc6              2/2     Running   0               7m43s
clusterlifecycle-state-metrics-v2-587c5978b9-hdlcg     1/1     Running   0               7m43s
console-mce-console-7b46d86995-dczmw                   1/1     Running   0               7m44s
console-mce-console-7b46d86995-gcwhk                   1/1     Running   0               7m44s
discovery-operator-7d7677c5b9-q8vnw                    1/1     Running   0               7m43s
hive-operator-6cf774979-qfxxw                          1/1     Running   0               7m43s
infrastructure-operator-f5b48bcf8-wtn8c                1/1     Running   0               7m43s
managedcluster-import-controller-v2-6695c74d89-5tgnr   1/1     Running   0               7m42s
managedcluster-import-controller-v2-6695c74d89-vthp8   1/1     Running   0               7m42s
multicluster-engine-operator-d94ff5478-2bbsc           1/1     Running   0               8m7s
multicluster-engine-operator-d94ff5478-tcjqp           1/1     Running   0               8m7s
ocm-controller-66544d4758-6fmn7                        1/1     Running   0               7m42s
ocm-controller-66544d4758-n254h                        1/1     Running   0               7m42s
ocm-proxyserver-57dcd75578-fsts4                       1/1     Running   0               7m42s
ocm-proxyserver-57dcd75578-xxcqn                       1/1     Running   0               7m42s
ocm-webhook-77bc99cb75-kvlr2                           1/1     Running   0               7m42s
ocm-webhook-77bc99cb75-w9rzh                           1/1     Running   0               7m42s
provider-credential-controller-56966d95cb-5vw5l        2/2     Running   0               7m43s
----

. Verify the HTTPD server is successfully running:
+
[source,terminal]
----
$ oc get pod -n default
----
+
.Example output
[source,terminal]
----
NAME                       READY   STATUS      RESTART         AGE
httpd-5479bfd6cb-2p1d4     1/1     RUNNING     0               150m
----

. Verify the internal registry is running:
+
[source,terminal]
----
$ oc get pod -n ztpfw-registry
----
+
.Example output
[source,terminal]
----
NAME                          READY   STATUS      RESTART         AGE
ztpfw-registry-77ff664d47     1/1     RUNNING     0               151m
----

. Review the pipeline run and verify the steps that were executed:
+
[NOTE]
====
This shows the duration of every step and the parameters supplied to the pipeline. It also highlights any issues during the execution of the pipeline.
====
+
[source,terminal]
----
$ tkn pr describe -n edgecluster-deployer
----
+
.Example output
[source,terminal]
----
Name:              deploy-ztp-hub-run-tjqp5
Namespace:         edgecluster-deployer
Pipeline Ref:      deploy-ztp-hub
Service Account:   pipeline
Timeout:           5h0m0s
Labels:
 tekton.dev/pipeline=deploy-ztp-hub

üå°Ô∏è  Status

STARTED      DURATION     STATUS
1 week ago   21 minutes   Succeeded

üì¶ Resources

 No resources

‚öì Params

 NAME              VALUE
 ‚àô kubeconfig      /root/.kcli/clusters/test-ci/auth/kubeconfig
 ‚àô edgeclusters-config   config:
  OC_OCP_VERSION: "4.10.24"
  OC_ACM_VERSION: '2.5'
  OC_OCS_VERSION: '4.10'
edgeclusters:
 ‚àô ztp-container-image   quay.io/ztpfw/pipeline:latest

üìù Results

 No results

üìÇ Workspaces

 NAME    SUB PATH   WORKSPACE BINDING
 ‚àô ztp   ---        PersistentVolumeClaim (claimName=ztp-pvc)

üóÇ  Taskruns

 NAME                                                            TASK NAME                      STARTED      DURATION     STATUS
 ‚àô deploy-ztp-hub-run-tjqp5-deploy-hub-config-26pp5              deploy-hub-config              1 week ago   42 seconds   Succeeded
 ‚àô deploy-ztp-hub-run-tjqp5-deploy-icsp-hub-5ctsr                deploy-icsp-hub                1 week ago   16 seconds   Succeeded
 ‚àô deploy-ztp-hub-run-tjqp5-deploy-acm-76b6c                     deploy-acm                     1 week ago   9 minutes    Succeeded
 ‚àô deploy-ztp-hub-run-tjqp5-deploy-disconnected-registry-7b9rw   deploy-disconnected-registry   1 week ago   11 minutes   Succeeded
 ‚àô deploy-ztp-hub-run-tjqp5-deploy-httpd-server-9mfcn            deploy-httpd-server            1 week ago   8 seconds    Succeeded
 ‚àô deploy-ztp-hub-run-tjqp5-pre-flight-pk5bp                     pre-flight                     1 week ago   9 seconds    Succeeded

‚è≠Ô∏è  Skipped Tasks

 No Skipped Tasks
----
